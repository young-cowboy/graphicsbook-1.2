# 绘制和绘画

本书的主要焦点是三维（3D）图形，其中大部分工作用于制作场景的3D模型。但最终，在几乎所有情况下，计算机图形项目的最终结果都是二维图像。当然，2D图像的直接制作和操作本身就是一个重要的话题。此外，许多想法从两个维度延续到三个维度。因此，从2D图形开始是有意义的。

在计算机屏幕上呈现的图像由像素组成。屏幕由像素的矩形网格组成，按行和列排列。像素足够小，不容易单独看。事实上，对于许多非常高分辨率的显示器，它们基本上是不可见的。在给定时间，每个像素只能显示一种颜色。这些天大多数屏幕使用24位颜色，其中颜色可以由三个8位数字指定，给出颜色中的红色，绿色和蓝色级别。可以在屏幕上显示的任何颜色都由这三种“主要”颜色的某种组合组成。其他格式也是可能的，例如灰度，其中每个像素是一些灰色阴影，像素颜色由一个数字给出，该数字指定黑白比例的灰度级。通常，使用256种灰度。早期的计算机屏幕使用索引颜色，其中只能显示一小组颜色，通常为16或256。对于索引颜色显示，存在可能颜色的编号列表，并且像素的颜色由给出列表中颜色的位置的整数指定。

在任何情况下，屏幕上所有像素的颜色值都存储在称为帧缓冲器的大块存储器中。更改屏幕上的图像需要更改存储在帧缓冲区中的颜色值。屏幕每秒重绘多次，因此几乎在帧缓冲区中更改颜色值后，屏幕上像素的颜色将更改为匹配，并且显示的图像将发生变化。

以这种方式使用的计算机屏幕是光栅图形的基本模型。术语“光栅”在技术上指的是老式真空管计算机显示器上使用的机制：电子束将沿着像素行移动，使它们发光。光束通过强大的磁铁在屏幕上移动，这些磁铁会偏转电子的路径。光束越强，像素的发光越亮，因此可以通过调制电子束的强度来控制像素的亮度。存储在帧缓冲器中的颜色值用于确定电子束的强度。（对于彩色屏幕，每个像素都有一个红点，一个绿点和一个蓝点，它们分别被光束照射。）

现代平板电脑显示器不是同样意义上的光栅。没有移动的电子束。控制像素颜色的机制对于不同类型的屏幕是不同的。但屏幕仍由像素组成，所有像素的颜色值仍存储在帧缓冲区中。由像素网格组成的图像的概念，每个像素的数值颜色值，定义光栅图形。

---

虽然计算机屏幕上的图像是使用像素表示的，但指定单个像素颜色并不总是创建图像的最佳方式。另一种方法是指定它包含的基本几何对象，诸如直线，圆，三角形和矩形之类的形状。这是定义矢量图形的想法：将图像表示为它包含的几何形状的列表。为了使事情更有趣，形状可以具有属性，例如线条的粗细或填充矩形的颜色。当然，并非每个图像都可以由简单的几何形状组成。这种方法肯定不适用于美丽的日落（或大多数任何其他摄影图像）的图片。但是，它适用于许多类型的图像，例如建筑蓝图和科学插图。

事实上，在计算历史的早期，矢量图形甚至直接用在计算机屏幕上。当开发出第一个图形计算机显示器时，光栅显示太慢而且实用起来很昂贵。幸运的是，有可能以另一种方式使用真空管技术：可以使电子束直接在屏幕上画线，只需沿着该线扫过光束即可。矢量图形显示器将存储显示列表应该出现在屏幕上的线条。由于屏幕上的一个点在被电子束照射后仅会非常短暂地发光，因此图形显示将反复遍历显示列表，不断重绘列表上的所有行。要更改图像，只需要更改显示列表的内容。当然，如果显示列表变得太长，图像将开始闪烁，因为线条有可能在下一轮重绘之前明显淡化。

但重点在于：对于可以指定为相当少量几何形状的图像，使用矢量表示而不是使用光栅表示来表示图像所需的信息量要小得多。考虑由一千个线段组成的图像。对于图像的矢量表示，您只需要存储两千个点的坐标，即线的端点。这将只占用几千字节的内存。要将图像存储在帧缓冲区中以进行光栅显示，需要更多的内存。类似地，矢量显示可以更快地在屏幕上绘制线条，而光栅显示器可以将相同的图像从帧缓冲区复制到屏幕。（然而，一旦光栅显示变得快速且便宜）

---

光栅图形和矢量图形之间的差异在计算机图形的几个区域中持续存在。例如，可以在两类可用于创建图像的程序之间划分：  绘画程序 和绘图程序。在绘画程序中，图像被表示为像素网格，并且用户通过将颜色分配给像素来创建图像。这可以通过使用“绘图工具”来完成，该绘图工具就像画家的画笔，甚至可以通过绘制几何形状（如线条或矩形）的工具来完成。但绘画程序中的要点是为各个像素着色，而只保存像素颜色。为了使这更清楚，假设您使用绘画程序绘制房屋，然后在房子前面画一棵树。如果你删除树，你只会显示一个空白背景，而不是房子。事实上，图像从来没有真正包含一个“房子”，只有观察者可能认为是构成房屋图片的单独彩色像素

在绘图程序中，用户通过添加几何形状来创建图像，并且图像被表示为这些形状的列表。如果你在图像中放置一个房屋形状（或构成房屋的形状的集合），然后你在房子的顶部放置一个树形状，房子仍然存在，因为它存储在形状列表中，图像包含。如果删除树，则房屋仍将位于图像中，就像添加树之前一样。此外，您应该能够选择图像中的一个形状并移动它或更改其大小，因此绘图程序提供了一组丰富的编辑操作，这些操作在绘画程序中是不可能的。（反过来也是如此。）

用于图像创建和编辑的实用程序可以组合绘画和绘图的元素，尽管一个或另一个通常占主导地位。例如，绘图程序可能允许用户包含光栅类型的图像，将其视为一个形状。绘画程序可以让用户创建“图层”，这些图层是可以一个在另一个上面分层的单独图像，以创建最终图像。然后可以像绘图程序中的形状一样操作图层（这样您就可以将房屋和树木保持在不同的图层中，即使房屋的图像位于树的后面）。

两个着名的图形程序是Adobe Photoshop和Adobe Illustrator。 Photoshop属于绘画程序类别，而Illustrator更像是绘图程序。在自由软件领域，GNU图像处理程序Gimp是Photoshop的一个很好的替代品，而Inkscape是一个相当强大的免费绘图程序。可以在附录C中找到对Gimp和Inkscape的简短介绍。

---

栅格和矢量图形之间的差异也出现在图形文件格式的字段中。有许多方法可以将图像表示为存储在文件中的数据。如果要从存储在文件中的位恢复原始图像，则表示必须遵循一些确切的已知规范。这种规范称为图形文件格式。一些流行的图形文件格式包括GIF，PNG，JPEG和SVG。Web上使用的大多数图像都是GIF，PNG或JPEG。现代Web浏览器也支持SVG图像。

GIF，PNG和JPEG基本上都是光栅图形格式; 通过存储每个像素的颜色值来指定图像。GIF是一种较旧的文件格式，在很大程度上已被PNG取代，但您仍然可以在网络上找到GIF图像。（GIF格式支持动画图像，因此GIF通常用于网页上的简单动画。）GIF使用最多256种颜色的索引颜色模型。PNG可以使用索引或全24位颜色，而JPEG则用于全彩色图像。

表示光栅图像所需的数据量可能非常大。但是，数据通常包含大量冗余，并且可以“压缩”数据以减小其大小。GIF和PNG使用无损数据压缩，这意味着可以从压缩数据中完美地恢复原始图像。JPEG使用有损数据压缩算法，这意味着从JPEG文件中恢复的图像与原始图像不完全相同; 一些信息已丢失。这可能听起来不是一个好主意，但事实上差异往往不是很明显，使用有损压缩通常可以更大程度地减少压缩数据的大小。JPEG通常适用于摄影图像，但不适用于在不同颜色之间具有锐边的图像。对于包含文本的线条图和图像尤其如此; PNG是此类图像的首选格式。

另一方面，SVG基本上是矢量图形格式（尽管SVG图像可以包括光栅图像）。SVG实际上是一种基于XML的语言，用于描述二维矢量图形图像。“SVG”代表“可缩放矢量图形”，术语“可缩放”表示矢量图形的优点之一：当图像尺寸增加时，质量没有损失。两点之间的线可以任何比例表示，它仍然是完美的几何线。另一方面，如果您试图大大增加光栅图像的大小，您会发现新图像中的所有像素都没有足够的颜色值; 来自原始图像的每个像素将被扩展以覆盖缩放图像中的像素矩形，你会得到均匀颜色的多像素块。SVG图像的可扩展特性使其成为Web浏览器和计算机桌面上图形元素的理想选择。事实上，一些桌面环境现在正在使用SVG图像作为桌面图标。

使用坐标系指定数字图像，无论其格式如何。坐标系统建立数字和几何点之间的对应关系。在两个维度中，为每个点分配一对数字，这些数字称为点的坐标。点的两个坐标通常称为x坐标和y坐标，但名称“x”和“y”是任意的。

光栅图像是排列成行和列的二维像素网格。因此，它具有自然坐标系，其中每个像素对应于给出行的编号和包含该像素的列的编号的一对整数。（即使在这种简单的情况下，对于行是应该从上到下还是从下到上进行编号存在一些分歧。）

对于矢量图像，使用实数坐标是很自然的。图像的坐标系在某种程度上是任意的; 也就是说，可以使用不同的坐标系指定相同的图像。我不想在这里说很多关于坐标系的内容，但它们将成为本书大部分内容的主要焦点，它们在三维图形中比在二维中更重要。
